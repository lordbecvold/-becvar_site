<!DOCTYPE html>
<html>
<head>
    <title>{{ 'code.paste.title'|trans }}</title>
    <link rel="icon" href="{{ asset('build/images/favicon.png') }}" type="image/x-icon"/>    
    {{ encore_entry_link_tags('paste-add-css') }}
    {{ encore_entry_link_tags('scrollbar-css') }}
    <script>
        function save() {
            var name = "";
            var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
            for (var i = 0; i < 15; i++) {
                name += possible.charAt(Math.floor(Math.random() * possible.length));
            }
            document.getElementById('file').value = name;
            var xhr = new XMLHttpRequest();
            xhr.open('POST', '/paste', true);
            var formData = new FormData(document.getElementById('form'));
            xhr.onload = function () {
                if (xhr.status === 200) {
                    window.open("/paste/view/" + name, "_self");
                }
            };
            xhr.send(formData);
        }
        document.addEventListener('keydown', function (event) {
            if ((event.ctrlKey || event.metaKey) && event.key === 's') {
                event.preventDefault();
                save();
            }
        });        
    </script>
</head>
<body>
    <a class="icon" onclick="save();">
        <img src="{{ asset('build/images/paste-save.svg') }}">
    </a>
    <form action="/paste" method="post" id="form">
        <input type="hidden" name="file" value="" id="file">
        <textarea autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" id="text" name="data" maxlength="30000"></textarea>
    </form>
</body>
</html>
