{% extends 'common/bases/admin-base.twig' %}

{% block title %}
    settings
{% endblock %}

{# ACCOUNT SETTINGS PAGE COMPONENT #}
{% block component %}
<div class="admin-panel">
    {# ERROR BOX #}
    {% if errorMsg != null %}
        {% include "common/alerts/error-alert.twig" %}
    {% endif %}
    {# PROFILE PIC CHANGE FORM #}
    {% if profilePicChangeForm != null %}
        <center>
            <div class="image-upload-form dark-table">
                <h2 class="form-title">Change profile image</h2>
                <div class="custom-file">
                    {{ form_start(profilePicChangeForm) }}
    
                        {{ form_widget(profilePicChangeForm) }}                
                        <div class="text-center mb-3">
                            <div class="right-position">
                                <button class="input-button" type="submit">Upload Image</button>
                            </div>
                        </div>
                
                    {{ form_end(profilePicChangeForm) }}      
                </div>   
            </div>
        </center>
    {# USERNAME CHANGE FORM #}
    {% elseif usernameChangeForm != null %}
        <center>
            <div class="image-upload-form dark-table">
                <h2 class="form-title">Change username</h2>
                <div class="custom-file">
                    {{ form_start(usernameChangeForm) }}

                        {{ form_widget(usernameChangeForm) }}                
                        <div class="text-center mb-3">
                            <button class="input-button" type="submit">Change username</button>
                        </div>
                
                    {{ form_end(usernameChangeForm) }}      
                </div>   
            </div>
        </center> 
    {# PASSWORD CHANGE FORM #}
    {% elseif passwordChangeForm != null %}
        <center>
            <div class="image-upload-form dark-table">
                <h2 class="form-title">Change password</h2>
                <div class="custom-file">
                    {{ form_start(passwordChangeForm) }}

                        {{ form_widget(passwordChangeForm) }}                
                        <div class="text-center mb-3">
                            <button class="input-button" type="submit">Change password</button>
                        </div>
                
                    {{ form_end(passwordChangeForm) }}      
                </div>   
            </div>
        </center>         
    {# ACCOUNT SETTINGS TABLE #}
    {% else %}
        <center>
            <h2 class="page-title phone-none">Account settings</h2>
            <div class="table-responsive account-settings-table">
                <table class="table table-dark">
                    <tbody>
                        <tr class="line-item">
                            <th scope='row'>profile-pic: 
                                <img class="profile-pics-admin-settings" src="data:image/jpeg;base64,{{ userPic|e }}" alt="profile-pic">
                            </th>
                            <th scope='row'>
                                <a href={{ path('admin_account_settings_pic_change') }}>change</a>
                            </th>
                        </tr>
                        <tr class="line-item">
                            <th scope='row'>username: {{ userName|e }}</th>
                            <th scope='row'>
                                <a href={{ path('admin_account_settings_username_change') }}>change</a>
                            </th>
                        </tr>
                        <tr class="line-item">
                            <th scope='row'>password: **********</th>
                            <th scope='row'>
                                <a href={{ path('admin_account_settings_password_change') }}>change</a>
                            </th>
                        </tr>
                    </tbody>
                </table>
            </div>
        </center>
    {% endif %}
</div>
{% endblock %}
